var app = app || {};

app.createLevelEleven = function() {
    // app.starfield.loadTexture("levelTenBackground", 0, false);
    // app.player.loadTexture("levelTenShip", 0, false);
    // app.player.animations.add('fly', [0, 1, 2]);

    // _.each(app.bullets.children, function(bullet) {
    //     bullet.loadTexture("levelTenBullet", 0, false);
    //     bullet.animations.add('pulse', [0, 1, 2]);
    //     bullet.animations.play('pulse', 20, true);
    // });

    // _.each(app.explosions.children, function(explosion) {
    //     explosion.loadTexture("levelNineKaboom", 0, false);
    // });

    app.aliensSpawnTime = 20000;

    app.createAliensLevelEleven();
    app.stateText.visible = false;
    app.levelCounter ++;
    // app.preloadLevelSeven();

}

app.createAliensLevelEleven = function() {

    // Reset aliens position
    app.aliens.x = 0;
    app.aliens.y = 0;

    seekerNum = 12;
    num = seekerNum / 4;

    // Asteroid group moving from top to bottom
    app.createAlienGroupTopBottomLevelNine(800, -300, num, app.descendLevelFour);

    // Asteroid group moving from bottom to top
    app.createAlienGroupTopBottomLevelNine(800, 950, num, app.ascendLevelFive);

    // Asteroid group moving from left to right
    app.createAlienGroupLeftRightLevelNine(-300, 650, num, app.moveRightLevelFour);

    // Asteroid group moving from right to left
    app.createAlienGroupLeftRightLevelNine(1200, 650, num, app.moveLeftLevelFour);

}

app.collisionHandlerLevelEleven = function(bullet, alien) {
    app.totalKillCount += 1;


    //  When a bullet hits an alien we kill them both
    bullet.kill();
    alien.kill();

    //AUDIO enemy is hit by bullet -K

    soundCall = new Howl({
    urls: [playSound("enemyHit")]
    }).play();

    //  Increase the score
    app.score += 20;
    app.scoreText.text = app.scoreString + app.score;

    //  And create an explosion :)
    var explosion = app.explosions.getFirstExists(false);
    explosion.reset(alien.body.x, alien.body.y);
    explosion.play('kaboom', 30, false, true);


}

app.preloadLevelSeven = function(){


    app.game.load.start();

};